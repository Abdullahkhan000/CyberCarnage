{% extends "data/base.html" %}
{% block title %}{{ about.game.game_name }} Details{% endblock %}

{% block content %}
<style>
/* =====================
   EXISTING STYLES
   ===================== */
@keyframes dynamicPan {
    0% { transform: scale(1.15) translateX(0); }
    50% { transform: scale(1.1) translateX(-8%); }
    100% { transform: scale(1.15) translateX(0); }
}
.poster-move {
    animation: dynamicPan 25s linear infinite alternate;
    transform-origin: top left;
}

.glitch-hover:hover {
    text-shadow: 1px 0 0 #ff0000, -1px 0 0 #000;
    animation: glitch-anim 0.2s infinite alternate;
}
@keyframes glitch-anim {
    0% { transform: translate(0); }
    20% { transform: translate(-2px,2px); }
    40% { transform: translate(-2px,-2px); }
    60% { transform: translate(2px,2px); }
    80% { transform: translate(2px,-2px); }
    100% { transform: translate(0); }
}

@keyframes subtleGlow {
    0% { box-shadow: 0 0 20px rgba(168, 85, 247, 0.2); }
    50% { box-shadow: 0 0 35px rgba(168, 85, 247, 0.5); }
    100% { box-shadow: 0 0 20px rgba(168, 85, 247, 0.2); }
}
.pulsing-card { animation: subtleGlow 4s ease-in-out infinite alternate; }

.scrollable {
    max-height: 20rem;
    overflow-y: auto;
    padding-right: 0.5rem;
}
.scrollable::-webkit-scrollbar { width: 6px; }
.scrollable::-webkit-scrollbar-thumb { background-color: #00f3ff; border-radius: 3px; }
.scrollable::-webkit-scrollbar-track { background-color: rgba(0, 0, 0, 0.2); }

/* =====================
   DISQUS OVERRIDES
   ===================== */
#disqus_thread {
    color-scheme: dark;
}

#disqus_thread iframe[src*="ads"],
#disqus_thread iframe[src*="promoted"],
#disqus_thread .adsbox,
#disqus_thread .advertisement,
#disqus_thread .promotion {
    display: none !important;
}
</style>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet" />

<div class="min-h-screen bg-black text-gray-100 py-6 px-4 sm:px-6 lg:px-8 relative overflow-hidden">
    <!-- Background grid & gradient -->
    <div class="absolute inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:14px_24px] pointer-events-none"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/50 to-black pointer-events-none"></div>

    <div class="relative z-10 max-w-4xl mx-auto">

        <div class="group relative bg-gray-900/70 backdrop-blur-md rounded-2xl border border-gray-700/50 overflow-hidden shadow-lg pulsing-card hover:shadow-[0_0_50px_rgba(168,85,247,0.5)] transition-all duration-500">

            <div class="relative h-72 sm:h-96 md:h-[500px] overflow-hidden rounded-t-2xl">
                <img src="{{ about.poster }}" alt="{{ about.game.game_name }}" class="w-full h-full object-cover poster-move" />
                <span class="absolute top-3 right-3 z-20 bg-black/70 backdrop-blur-sm border border-cyan-500/30 text-cyan-400 text-xs sm:text-sm font-bold uppercase px-2 py-1 rounded-full shadow-lg glitch-hover">
                    {{ about.platform }}
                </span>
                <h1 class="absolute bottom-4 left-4 text-3xl sm:text-5xl md:text-6xl font-extrabold uppercase tracking-tight text-white drop-shadow-[0_0_15px_#bc13fe] glitch-hover font-orbitron">
                    {{ about.game.game_name }}
                </h1>
            </div>

            <!-- Content -->
            <div class="p-4 sm:p-8 space-y-6">
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 border-b border-white/10 pb-4 sm:pb-6 auto-rows-min">
                    <div class="border-l-4 border-purple-500 pl-3">
                        <p class="text-xs text-purple-400 uppercase font-mono">Series</p>
                        <p class="text-lg font-bold glitch-hover">{{ about.game.series|default:"N/A" }}</p>
                    </div>
                    <div class="border-l-4 border-green-500 pl-3">
                        <p class="text-xs text-green-400 uppercase font-mono">Developer</p>
                        <p class="text-lg font-bold glitch-hover">{{ about.game.developer|default:"N/A" }}</p>
                    </div>
                    <div class="border-l-4 border-yellow-500 pl-3">
                        <p class="text-xs text-yellow-400 uppercase font-mono">Publisher</p>
                        <p class="text-lg font-bold glitch-hover">{{ about.game.publisher|default:"N/A" }}</p>
                    </div>
                    <div class="border-l-4 border-cyan-500 pl-3">
                        <p class="text-xs text-cyan-400 uppercase font-mono">Release</p>
                        <p class="text-lg font-bold">{{ about.game.release_date|default:"N/A" }}</p>
                    </div>
                    <div class="border-l-4 border-pink-500 pl-3">
                        <p class="text-xs text-pink-400 uppercase font-mono">Genre</p>
                        <p class="text-lg font-bold glitch-hover">{{ about.genre|default:"N/A" }}</p>
                    </div>
                    <div class="border-l-4 border-indigo-500 pl-3">
                        <p class="text-xs text-indigo-400 uppercase font-mono">Story Arc</p>
                        <div class="text-lg font-bold glitch-hover scrollable">{{ about.story|default:"N/A" }}</div>
                    </div>
                    <div class="border-l-4 border-gray-600 pl-3">
                        <p class="text-xs text-gray-400 uppercase font-mono">System ID</p>
                        <p class="text-lg font-bold font-mono">{{ about.steam_appid|default:"N/A" }}</p>
                    </div>
                    <div class="border-l-4 border-red-500 pl-3">
                        <p class="text-xs text-red-400 uppercase font-mono">Access</p>
                        <p class="text-lg font-bold">CLASSIFIED</p>
                    </div>
                </div>

                <div class="scrollable">
                    <h3 class="text-xl sm:text-2xl font-display text-cyan-400 border-b border-cyan-600/40 pb-2 mb-4">
                        DATA LOG: SUMMARY
                    </h3>
                    <p class="text-gray-300 leading-relaxed text-base sm:text-lg">
                        {{ about.description|default:"This file contains key operational data on the subject title. Further access requires Level 4 clearance." }}
                    </p>
                </div>

                <div class="mt-4 sm:mt-6 flex flex-wrap gap-3 sm:gap-4">
                    {% if about.steam_link %}
                    <a href="{{ about.steam_link }}" target="_blank"
                        class="relative inline-flex items-center justify-center overflow-hidden rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 p-[2px] shadow-lg transition-all group/btn focus:outline-none hover:brightness-125 w-full sm:w-auto">
                        <span
                            class="absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#8b5cf6_0%,#3b82f6_50%,#8b5cf6_100%)] opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></span>
                        <span
                            class="inline-flex h-full w-full cursor-pointer items-center justify-center rounded-lg bg-gray-900 px-4 sm:px-6 py-2 text-white font-bold tracking-wider backdrop-blur-3xl transition-all group-hover/btn:bg-transparent glitch-hover">
                            ACCESS DATA: STEAM
                        </span>
                    </a>
                    {% endif %}
                    {% if about.site_link %}
                    <a href="{{ about.site_link }}" target="_blank"
                        class="w-full sm:w-auto px-4 sm:px-6 py-2 bg-gray-800 text-white font-bold rounded-lg hover:brightness-110 transition-all shadow-lg glitch-hover">
                        OFFICIAL SITE
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="relative z-10 max-w-4xl mx-auto mt-10 sm:mt-16 px-2 sm:px-0">
    <div class="bg-gray-900/70 backdrop-blur-md rounded-2xl border border-gray-700/50 shadow-lg p-4 sm:p-6">
        <h2 class="text-xl sm:text-2xl font-extrabold uppercase tracking-wide text-cyan-400 mb-4 glitch-hover">
            ðŸ’¬ Community Intel
        </h2>

        <button id="loadCommentsBtn"
            class="w-full sm:w-auto px-6 py-2 mb-4 bg-cyan-600 text-black font-bold rounded-lg hover:bg-cyan-500 transition">
            Load Comments
        </button>

        <div id="disqus_thread"></div>
    </div>
</div>

<script>
let disqusLoaded = false;

document.getElementById("loadCommentsBtn")?.addEventListener("click", function () {
    if (disqusLoaded) return;
    disqusLoaded = true;
    this.style.display = "none";

    window.disqus_config = function () {
        this.page.url = "{{ request.build_absolute_uri }}";
        this.page.identifier = "game-{{ about.game.id }}";
    };

    var d = document, s = d.createElement("script");
    s.src = "https://cyber-carnage.disqus.com/embed.js";
    s.setAttribute("data-timestamp", +new Date());
    (d.head || d.body).appendChild(s);
});
</script>

<noscript>
Enable JavaScript to view the comments.
</noscript>

<script>
module.exports = {
    theme: {
        extend: {
            fontFamily: {
                orbitron: ['Orbitron', 'sans-serif'],
            }
        }
    }
}
</script>
{% endblock %}